# Global Unicode Support Implementation

## ‚úÖ –†–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!

–¢–µ–ø–µ—Ä—å **–≤–µ—Å—å —Å–∞–π—Ç** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ JSON –æ—Ç–≤–µ—Ç–∞—Ö –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Unicode.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ AppServiceProvider**

üìÅ `app/Providers/AppServiceProvider.php`

```php
public function boot(): void
{
    // Set global JSON encoding options for proper Unicode support
    // This will affect all JSON responses in the application
    \Illuminate\Http\Response::macro('json', function ($data = [], $status = 200, array $headers = [], $options = 0) {
        // Always add Unicode flags to preserve Polish and other special characters
        $options |= JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES;

        return new \Illuminate\Http\JsonResponse($data, $status, $headers, $options);
    });
}
```

### 2. **Middleware –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏**

üìÅ `app/Http/Middleware/UnicodeJsonResponse.php`

-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç Unicode —Ñ–ª–∞–≥–∏ –∫–æ –≤—Å–µ–º JSON –æ—Ç–≤–µ—Ç–∞–º –≤ API –º–∞—Ä—à—Ä—É—Ç–∞—Ö

### 3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware –≤ HTTP Kernel**

üìÅ `app/Http/Kernel.php`

```php
'api' => [
    \Laravel\Sanctum\Http\Middleware\EnsureFrontendRequestsAreStateful::class,
    'throttle:5000,1',
    \Illuminate\Routing\Middleware\SubstituteBindings::class,
    \App\Http\Middleware\UnicodeJsonResponse::class, // <-- –î–æ–±–∞–≤–ª–µ–Ω–æ
],
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ **–î–û (—Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º):**

```json
{
    "message": "Dokument DM zosta\u0142 utworzony pomy\u015blnie przez API"
}
```

### ‚úÖ **–ü–û–°–õ–ï (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ):**

```json
{
    "message": "Dokument DM zosta≈Ç utworzony pomy≈õlnie przez API"
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. **–¢–µ—Å—Ç –æ–±—ã—á–Ω–æ–≥–æ API endpoint:**

```bash
curl https://fulstor.test/api/test-unicode
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–ª—å—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 2. **–¢–µ—Å—Ç error endpoint:**

```bash
curl https://fulstor.test/api/test-unicode-error
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ø–æ–ª—å—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 3. **–¢–µ—Å—Ç DM API:**

```bash
curl -X POST https://fulstor.test/api/dm/create \
  -H "X-API-Key: 12345" \
  -H "Content-Type: application/json" \
  -d '{"products": [...]}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ DM API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—å—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

1. **üåç –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ–º —Å–∞–π—Ç–µ** - –≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **üîß –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞** - –≤—Å–µ `response()->json()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Unicode
3. **üìà –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–º–Ω–∏—Ç—å –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
4. **üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ JSON –æ—Ç–≤–µ—Ç–∞–º
5. **üîí –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã:

-   **–ü–æ–ª—å—Å–∫–∏–µ:** ƒÖƒáƒô≈Ç≈Ñ√≥≈õ≈∫≈º ƒÑƒÜƒò≈Å≈É√ì≈ö≈π≈ª
-   **–î—Ä—É–≥–∏–µ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ:** √§√∂√º√ü √†√©√®√™√ß √±
-   **–ö–∏—Ä–∏–ª–ª–∏—Ü–∞:** –∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π
-   **–ò –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ Unicode —Å–∏–º–≤–æ–ª—ã**

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

–¢–µ–ø–µ—Ä—å **–≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

```php
return response()->json([
    'message' => 'Dokument zosta≈Ç utworzony pomy≈õlnie',
    'b≈ÇƒÖd' => 'Nieprawid≈Çowe ≈ºƒÖdanie u≈ºytkownika'
]);
```

–ò –ø–æ–ª—å—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üéâ
